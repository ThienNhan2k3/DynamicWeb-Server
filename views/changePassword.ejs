<!DOCTYPE html>
<html lang="en" >
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <title>Sở | Cập nhật mật khẩu</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

    <!-- Font awesome -->
    <script src="https://kit.fontawesome.com/5990078b0a.js" crossorigin="anonymous"></script>

    <!-- Chart JS-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!--Css link -->
    <link rel="stylesheet" href="/css/So/style.css">
    <link rel="stylesheet" href="/css/toggleNavigation.css">
    <link rel="stylesheet" href="/css/alert.css">

    <style>
      .fa-info-circle {
        cursor: pointer;
      }

      .chartContainer {
        overflow-x: auto;
        max-width: 100%;
        width: 100%;
      }

      .chartContainerBody {
        width: 100%;
      }
    </style>

  </head>
  <body>
    <!-- Header content -->
    <%- include("./partials/header.ejs") %>
    <!-- Navbar content -->
    <%- include("./partials/navbar.ejs") %> 
    <!-- Main content -->
    <% if (errorChangePassword && errorChangePassword.flag === "serverError"){ %>
      <div class="alert-container" id="create-alert-container">
        <div class="alert alert-danger mb-0" role="alert" id="registerAlert">
          <i class="fa-regular fa-circle-check fa-2xl"></i>
          <span class="ms-3 fs-5"><%= errorChangePassword.content %></span>
        </div>
        <div class="progress progress-danger"></div>
      </div>
    <% } %>
    <main class="dynamic-container container">
      <div class="row justify-content-center py-5 px-2">
        <div class="col col-12 col-md-10 col-lg-8 col-xl-6">
          <h3 class="text-center">Đổi mật khẩu</h3>
          <form  class="px-4 mt-4" action="/changePassword" method="POST">
            <div class="row mt-1 mb-0 form-floating is-invalid">
              <input 
                type="password" 
                <% if(errorChangePassword && errorChangePassword.flag === "currentPassword"){ %> class="form-control  is-invalid" 
                <% } else { %>
                  class="form-control"
                <% } %>"
                id="currentPassword"  name="currentPassword" placeholder="Mật khẩu hiện tại" required>
              <label for="currentPassword" class="mb-2">Nhập mật khẩu hiện tại</label>
            </div>
            <% if(errorChangePassword && errorChangePassword.flag === "currentPassword") { %>
            <div class="invalid-feedback"> <%= errorChangePassword.content %></div>
            <% } %>
            <div class=" row mb-0 mt-3 form-floating is-invalid">
              <input 
                type="password" 
                <% if(errorChangePassword && errorChangePassword.flag === "newPassword"){ %> class="form-control  is-invalid" 
                <% } else { %>
                  class="form-control"
                <% } %>"
                id="newPassword"  name="newPassword" placeholder="Mật khẩu mới" required>
              <label for="newPassword" class="mb-2">Nhập mật khẩu mới</label>
            </div>
            <% if(errorChangePassword && errorChangePassword.flag === "newPassword") { %>
            <div class="invalid-feedback"> <%= errorChangePassword.content %></div>
            <% } %>
          <div class="row mb-0 mt-3 form-floating is-invalid">
              <input 
                type="password" 
                <% if(errorChangePassword && errorChangePassword.flag === "confirmNewPassword"){ %> class="form-control  is-invalid" 
                <% } else { %>
                  class="form-control"
                <% } %>"
                id="confirmNewPassword"  name="confirmNewPassword" placeholder="Xác nhận mật khẩu mới" required>
              <label for="confirmNewPassword" class="mb-2">Nhập lại mật khẩu mới</label>
          </div>
          <% if(errorChangePassword && errorChangePassword.flag === "confirmNewPassword") { %>
          <div class="invalid-feedback"> <%= errorChangePassword.content %></div>
          <% } %>
          <div class="row mt-4">
            <button type="submit" class="btn btn-success col mx-0">Cập nhật</button>
          </div>
          </form>
        </div>
        
      </div>
    </main> 
    <!-- Footer -->
    <%- include("./partials/footer.ejs") %>
    <script src="/javascript/toggleNavigation.js"></script>
  </body>

  <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
    integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
    crossorigin="anonymous"
  ></script>
</html>
